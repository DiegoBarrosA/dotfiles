---
# Sway window manager configuration role

- name: Create sway config directory
  ansible.builtin.file:
    path: "{{ user_home }}/.config/sway"
    state: directory
    mode: '0755'
  tags: [sway, config]

- name: Create sway scripts directory
  ansible.builtin.file:
    path: "{{ user_home }}/.config/sway/scripts"
    state: directory
    mode: '0755'
  tags: [sway, config]

- name: Deploy sway config
  ansible.builtin.copy:
    src: "{{ playbook_dir }}/../configs/sway/config"
    dest: "{{ user_home }}/.config/sway/config"
    mode: '0644'
  tags: [sway, config]

- name: Deploy launch-or-focus script
  ansible.builtin.copy:
    src: "{{ playbook_dir }}/../configs/sway/scripts/launch-or-focus.sh"
    dest: "{{ user_home }}/.config/sway/scripts/launch-or-focus.sh"
    mode: '0755'
  tags: [sway, config]

- name: Deploy power-menu script
  ansible.builtin.copy:
    src: "{{ playbook_dir }}/../configs/sway/scripts/power-menu.sh"
    dest: "{{ user_home }}/.config/sway/scripts/power-menu.sh"
    mode: '0755'
  tags: [sway, config]

- name: Create XDG environment.d directory
  ansible.builtin.file:
    path: "{{ user_home }}/.config/environment.d"
    state: directory
    mode: '0755'
  tags: [sway, config]

- name: Deploy XDG environment config
  ansible.builtin.copy:
    src: "{{ playbook_dir }}/../configs/environment.d/xdg.conf"
    dest: "{{ user_home }}/.config/environment.d/xdg.conf"
    mode: '0644'
  tags: [sway, config]

- name: Create xdg-desktop-portal config directory
  ansible.builtin.file:
    path: "{{ user_home }}/.config/xdg-desktop-portal"
    state: directory
    mode: '0755'
  tags: [sway, config]

- name: Deploy portal config
  ansible.builtin.copy:
    src: "{{ playbook_dir }}/../configs/xdg-desktop-portal/portals.conf"
    dest: "{{ user_home }}/.config/xdg-desktop-portal/portals.conf"
    mode: '0644'
  tags: [sway, config]

- name: Create xdg-desktop-portal-wlr config directory
  ansible.builtin.file:
    path: "{{ user_home }}/.config/xdg-desktop-portal-wlr"
    state: directory
    mode: '0755'
  tags: [sway, config]

- name: Deploy portal-wlr config
  ansible.builtin.copy:
    src: "{{ playbook_dir }}/../configs/xdg-desktop-portal-wlr/sway"
    dest: "{{ user_home }}/.config/xdg-desktop-portal-wlr/sway"
    mode: '0644'
  tags: [sway, config]

- name: Create flameshot config directory
  ansible.builtin.file:
    path: "{{ user_home }}/.config/flameshot"
    state: directory
    mode: '0755'
  tags: [sway, config]

- name: Deploy flameshot config
  ansible.builtin.copy:
    src: "{{ playbook_dir }}/../configs/flameshot/flameshot.ini"
    dest: "{{ user_home }}/.config/flameshot/flameshot.ini"
    mode: '0644'
  tags: [sway, config]

- name: Create Pictures directory for screenshots
  ansible.builtin.file:
    path: "{{ user_home }}/Pictures"
    state: directory
    mode: '0755'
  tags: [sway, config]
